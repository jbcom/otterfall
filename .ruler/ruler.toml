# Ruler Configuration for Rivermarsh Game Development
# Cross-platform AI agent instructions and MCP server definitions

# Default agents when --agents flag not specified
default_agents = ["copilot", "claude", "cursor", "cline", "windsurf"]

# Enable nested rule loading for component-specific instructions
# This allows .ruler/ directories throughout the project tree
# 
# Rule loading order:
# 1. /AGENTS.md (root, executive summary)
# 2. /.ruler/AGENTS.md (cross-cutting standards)
# 3. /.ruler/*.md (ECS patterns, shaders, R3F guidelines)
# 4. /client/.ruler/AGENTS.md (client-specific)
# 5. /client/.ruler/*.md (rendering pipeline)
# 6. /python/.ruler/AGENTS.md (Python backend)
# 7. /python/crew_agents/.ruler/*.md (CrewAI workflows)
# 8. /docs/.ruler/*.md (documentation standards)
# 9. /shared/.ruler/AGENTS.md (contracts & types)
nested = true

# --- Global MCP Server Configuration ---
[mcp]
enabled = true
merge_strategy = "merge"

# --- Global .gitignore Configuration ---
[gitignore]
enabled = true

# --- MCP Server Definitions (Shared by ALL agents) ---
# Run 'ruler apply --nested' to generate .mcp.json for CrewAI
# All IDE agents (Cursor, Claude, etc.) AND CrewAI agents use this same pool

[mcp_servers.material-ui]
command = "npx"
args = ["-y", "@material-ui/mcp-server"]

[mcp_servers.playwright]
command = "npx"
args = ["-y", "@executeautomation/playwright-mcp-server"]

[mcp_servers.context7]
command = "npx"
args = ["-y", "@upstreamapi/context7"]

[mcp_servers.vite-react]
command = "npx"
args = ["-y", "vite-react-mcp-server"]

[mcp_servers.conport]
command = "uvx"
args = ["--from", "context-portal-mcp", "conport-mcp"]

[mcp_servers.conport.env]
CONPORT_FILES = "projectbrief.md"

[mcp_servers.git]
command = "uvx"
args = ["mcp-server-git", "--repository", "."]

[mcp_servers.github]
command = "npx"
args = ["-y", "@modelcontextprotocol/server-github"]

[mcp_servers.github.env]
GITHUB_PERSONAL_ACCESS_TOKEN = "${GITHUB_PERSONAL_ACCESS_TOKEN}"

[mcp_servers.memory]
command = "npx"
args = ["-y", "@modelcontextprotocol/server-memory"]

[mcp_servers.filesystem]
command = "npx"
args = ["-y", "@modelcontextprotocol/server-filesystem", "./"]

# --- Agent-Specific Configurations ---

[agents.copilot]
enabled = true

[agents.claude]
enabled = true
output_path = "CLAUDE.md"

[agents.cursor]
enabled = true

[agents.cursor.mcp]
enabled = true
merge_strategy = "merge"

[agents.cline]
enabled = true

[agents.windsurf]
enabled = true

[agents.aider]
enabled = true
output_path_instructions = "AGENTS.md"
output_path_config = ".aider.conf.yml"

[agents.zed]
enabled = true

[agents.kilocode]
enabled = true
output_path = ".kilocode/rules/ruler_kilocode_instructions.md"